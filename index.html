<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THỜI KHÓA BIỂU LỚP 8A9</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: url('background.jpg') no-repeat center center fixed;
            background-size: cover;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 1000px;
            margin: auto;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
        }
        .info {
            text-align: center;
            font-size: 18px;
            margin-bottom: 10px;
        }
        .week-info {
            text-align: center;
            font-size: 18px;
            color: #8e44ad;
            margin-bottom: 15px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            text-align: center;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 8px;
        }
        th {
            color: white;
        }
        /* Màu cột Thứ 2 đến Thứ 7 */
        th:nth-child(2) { background: #f28b82; }
        th:nth-child(3) { background: #fbbc04; }
        th:nth-child(4) { background: #fff475; color: #333; }
        th:nth-child(5) { background: #ccff90; color: #333; }
        th:nth-child(6) { background: #a7ffeb; color: #333; }
        th:nth-child(7) { background: #cbf0f8; color: #333; }

        /* Màu nội dung cột */
        td:nth-child(2) { background: #fde0dc; }
        td:nth-child(3) { background: #fff4e5; }
        td:nth-child(4) { background: #ffffe0; }
        td:nth-child(5) { background: #e6ffea; }
        td:nth-child(6) { background: #e0f7f4; }
        td:nth-child(7) { background: #e0f7fa; }

        .morning { color: blue; font-weight: bold; }
        .afternoon { color: brown; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>THỜI KHÓA BIỂU LỚP 8A9</h1>
        <div class="info">GVCN: NGUYỄN THỊ A | SĐT: 0912345678</div>
        <div id="today" class="info"></div>
        <div id="weekInfo" class="week-info"></div>
        <table id="tkb">
            <thead>
                <tr>
                    <th>Buổi/Tiết</th>
                    <th>Thứ 2</th>
                    <th>Thứ 3</th>
                    <th>Thứ 4</th>
                    <th>Thứ 5</th>
                    <th>Thứ 6</th>
                    <th>Thứ 7</th>
                </tr>
            </thead>
            <tbody id="schedule"></tbody>
        </table>
    </div>

    <script>
        // Hiển thị ngày hiện tại
        const days = ['Chủ Nhật', 'Thứ 2', 'Thứ 3', 'Thứ 4', 'Thứ 5', 'Thứ 6', 'Thứ 7'];
        const now = new Date();
        document.getElementById('today').innerText =
            `${days[now.getDay()]}, ${now.getDate()}/${now.getMonth()+1}/${now.getFullYear()}`;

        // Tính số tuần
        const startDate = new Date(2025, 8, 8); // 8/9/2025
        const diffDays = Math.floor((now - startDate) / (1000 * 60 * 60 * 24));
        if (diffDays >= 0) {
            const weekNumber = Math.floor(diffDays / 7) + 1;
            document.getElementById('weekInfo').innerText = `Tuần học: ${weekNumber}`;
        } else {
            document.getElementById('weekInfo').innerText =
                `Còn ${Math.abs(diffDays)} ngày nữa đến tuần học đầu tiên`;
        }

        // Lấy dữ liệu từ Google Sheet
        fetch('https://script.google.com/macros/s/AKfycbzTElxNBgS5_ZhoFR-JxRtUKUeGox70eh3p_Z9O6p9XZmm1YYJD3KhaCbGYojqVtPOx/exec')
        .then(res => res.json())
        .then(data => {
            const schedule = document.getElementById('schedule');
            const buoiSang = ['Sáng - Tiết 1', 'Sáng - Tiết 2', 'Sáng - Tiết 3', 'Sáng - Tiết 4', 'Sáng - Tiết 5'];
            const buoiChieu = ['Chiều - Tiết 1', 'Chiều - Tiết 2', 'Chiều - Tiết 3', 'Chiều - Tiết 4', 'Chiều - Tiết 5'];

            buoiSang.forEach((tiet, i) => {
                const row = document.createElement('tr');
                row.innerHTML = `<td class="morning">${tiet}</td>` +
                    data[i].slice(1, 7).map(mon => `<td>${mon}</td>`).join('');
                schedule.appendChild(row);
            });

            buoiChieu.forEach((tiet, i) => {
                const row = document.createElement('tr');
                row.innerHTML = `<td class="afternoon">${tiet}</td>` +
                    data[i + 5].slice(1, 7).map(mon => `<td>${mon}</td>`).join('');
                schedule.appendChild(row);
            });
        });
    </script>
</body>
</html>
